<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exuberant</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="forum.css">
</head>
<body>

<div class="app">

  <!-- TOP -->
  <header class="topbar">
    <div class="title">Exuberant</div>
    <button class="ghost" onclick="location.href='/settings.html'">Settings</button>
  </header>

  <!-- FEED -->
  <main class="feed" id="feed"></main>

</div>

<!-- BOTTOM NAV (без иконок) -->
<nav class="bottom-nav">
  <button class="nav-item active" onclick="setTab('feed')">Feed</button>
  <button class="nav-item" onclick="setTab('search')">Search</button>
  <button class="nav-item center" onclick="openCreate()">New</button>
  <button class="nav-item" onclick="location.href='/settings.html'">Profile</button>
</nav>

<script>
async function me() {
  const r = await fetch("/api/profile", { credentials: "include" });
  if (r.status === 401) location.href = "/index.html";
  return r.json();
}

function setTab(tab) {
  document.querySelectorAll(".nav-item").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
}

function openCreate() {
  location.href = "/create.html";
}

(async () => {
  await me();
})();
</script>

</body>
</html>
